# Patches

This file documents patches applied to submodules. Ideally, these should be submitted as PRs to the upstream repositories.

## whatsapp-rust

### Expose register_handler

**Status:** Pending Upstream PR
**File:** `src/client.rs`
**Reason:** To allow external consumers (like Tauri apps) to listen to events (QR codes, messages, etc.) generated by the core event bus, which is otherwise private.

**Diff:**
```diff
--- a/src/client.rs
+++ b/src/client.rs
@@ -380,6 +380,11 @@
         router
     }

+    /// Registers an external event handler to the core event bus.
+    /// This allows consumers of the library to listen for events like QR codes, messages, etc.
+    pub fn register_handler(&self, handler: Arc<dyn wacore::types::events::EventHandler>) {
+        self.core.event_bus.add_handler(handler);
+    }
+
     pub async fn run(self: &Arc<Self>) {
         if self.is_running.swap(true, Ordering::SeqCst) {
             warn!("Client `run` method called while already running.");
```

**PR Description:**
Hi! I'm using your library in a wrapper application and needed a way to listen to events (like QR Code, Messages, etc.) from outside the Client struct. Since the core field and event_bus are private, I couldn't subscribe to them directly.

I've added a simple public method register_handler to Client that forwards the handler to the internal CoreEventBus.

This small change makes the library much more usable for external applications without exposing the entire CoreClient internals. Thanks!
